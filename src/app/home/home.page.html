<ion-header class="cosmic-header">
  <ion-toolbar class="cosmic-toolbar">
    <div class="header-inner">
      <div class="header-brand" (click)="currentView = 'universe'; scrollToSection('landing')">
        <div class="brand-logo-container">
          <ion-icon name="planet-outline" class="brand-icon"></ion-icon>
        </div>
        <span class="brand-text">GALAXICS</span>
      </div>

      <div class="header-nav-desktop" *ngIf="currentView === 'universe'">
        <button id="lang-trigger" class="nav-link-btn">
          Languages <ion-icon name="chevron-down-outline"></ion-icon>
        </button>
        
        <ion-popover trigger="lang-trigger" triggerAction="click" class="lang-popover" #popover>
          <ng-template>
            <div class="popover-content">
              <div class="popover-item" *ngFor="let planet of planets" (click)="navigateToPlanetFromMenu(planet)">
                <span class="dot" [style.background]="planet.color"></span>
                <div class="item-text">
                  <span class="name">{{ planet.name }}</span>
                  <span class="status" [style.color]="planet.status === 'active' ? '#00ff88' : '#666'">
                    {{ planet.status === 'active' ? 'ONLINE' : 'LOCKED' }}
                  </span>
                </div>
              </div>
            </div>
          </ng-template>
        </ion-popover>

        <a (click)="scrollToSection('info')">Benefits</a>
        <a (click)="scrollToSection('social')">Social</a>
      </div>

      <div class="header-nav-desktop planet-nav" *ngIf="currentView === 'planet-view'">
        <a *ngFor="let region of skillRegions" (click)="enterRegion(region)" class="skill-link" [style.--skill-color]="region.color">
          <ion-icon [name]="region.icon"></ion-icon> 
          <span class="link-text">{{ region.title }}</span>
        </a>
      </div>

      <div class="header-status">
        <span class="status-indicator"></span>
        <span class="location-text">
          {{ currentView === 'universe' ? 'SYSTEM ONLINE' : 'ORBIT: ' + selectedPlanet?.name }}
        </span>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="main-content">
  
  <div class="deep-space-bg">
    <div class="bg-nebula"></div>
    <div class="bg-twinkle"></div>
  </div>
  <canvas #particleCanvas class="particle-canvas"></canvas>

  <div *ngIf="currentView === 'universe'" class="view-wrapper">
    
    <section id="landing" class="landing-hero">
      <div class="hero-content-center">
        <div class="mega-brand fade-in-element">
          <div class="badge-pill">
            <span class="dot"></span> IMMERSIVE LEARNING PROTOCOL
          </div>
          <h1 class="main-title">GALAXICS</h1>
        </div>

        <p class="hero-description fade-in-element delay-200 new-font">
          The void is vast, but it doesn't have to be silent. <br>
          Unlock ancient knowledge and turn your voice into the ultimate tool for exploration.
        </p>

        <div class="hero-actions fade-in-element delay-300">
          <button class="btn-primary-glow" (click)="scrollToSection('star-map')">
            <span class="btn-content">INITIALIZE SYSTEM <ion-icon name="arrow-forward-outline"></ion-icon></span>
            <div class="glow-effect"></div>
          </button>
        </div>
      </div>

      <div class="scroll-down-hint fade-in-element delay-500" (click)="scrollToSection('star-map')">
        <span>SCROLL TO EXPLORE</span>
        <ion-icon name="chevron-down-outline" class="bounce-icon"></ion-icon>
      </div>
    </section>

    <section id="star-map" class="solar-system-display">
      
      <div class="display-header scroll-reveal">
        <span class="overline">SECTOR 01</span>
        <h2>SELECT YOUR TARGET <span class="highlight">LANGUAGE SYSTEM</span></h2>
        <p>Choose a planet to start learning.</p>
      </div>

      <div class="solar-viewport scroll-reveal">
        <div class="sun-wrapper">
          <div class="sun-core"></div>
          <div class="sun-atmosphere"></div>
          <div class="sun-flare"></div>
        </div>

        <div class="orbit-decoration orbit-1"></div>
        <div class="orbit-decoration orbit-2"></div>

        <div class="orbit-ring" *ngFor="let planet of planets"
             [style.width.px]="planet.distance * 2"
             [style.height.px]="planet.distance * 2">
          
          <div class="orbit-path"></div>
          
          <div class="planet-mover" [style.animation-duration]="planet.orbitDuration">
            <div class="planet-hitbox" (click)="selectPlanet(planet)">
              
              <div class="planet-body"
                   [class.locked]="planet.status === 'locked'"
                   [style.width.px]="planet.size"
                   [style.height.px]="planet.size">
                
                <div class="planet-surface" [style.background]="planet.status === 'active' ? planet.color : '#444'"></div>
                <div class="planet-shadow-overlay"></div>
                <div class="planet-glow" [style.box-shadow]="'0 0 40px ' + planet.color"></div>
                
                <ion-icon *ngIf="planet.status === 'locked'" name="lock-closed-outline" class="lock-icon"></ion-icon>
              </div>

              <div class="planet-tag" [class.active]="planet.status === 'active'">
                <span class="tag-name">{{ planet.name }}</span>
                <span class="tag-status">{{ planet.status === 'active' ? 'ONLINE' : 'LOCKED' }}</span>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="info" class="info-section">
      <div class="container">
        <div class="section-header-text scroll-reveal">
          <span class="overline">WHY GALAXICS</span>
          <h2>THE FUTURE OF <span class="highlight">LEARNING</span></h2>
          <p>We combine advanced technology with immersive storytelling.</p>
        </div>

        <div class="features-grid">
          <div class="feature-card scroll-reveal" *ngFor="let item of benefits">
            <div class="icon-box"><ion-icon [name]="item.icon"></ion-icon></div>
            <h3>{{ item.title }}</h3>
            <p>{{ item.desc }}</p>
          </div>
        </div>
      </div>
    </section>

    <section id="social" class="social-section">
      <div class="container">
        <div class="section-header-text scroll-reveal">
          <span class="overline">COMMUNITY UPLINK</span>
          <h2>JOIN THE <span class="highlight">ALLIANCE</span></h2>
          <p>Follow our frequencies for daily updates and intel.</p>
        </div>

        <div class="social-grid">
          <div class="social-card scroll-reveal" *ngFor="let social of socialLinks; let i = index" 
               [style.transition-delay]="i * 100 + 'ms'">
            <div class="social-icon" [style.color]="social.color" [style.border-color]="social.color">
              <ion-icon [name]="social.icon"></ion-icon>
            </div>
            <div class="social-info">
              <h3 [style.color]="social.color">{{ social.name }}</h3>
              <span class="social-handle">{{ social.handle }}</span>
            </div>
            <ion-icon name="arrow-forward-outline" class="go-icon"></ion-icon>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div *ngIf="currentView === 'planet-view'" class="view-wrapper">
    <section class="planet-interior">
      <div class="container">
        
        <div class="interior-nav">
          <ion-button fill="clear" class="back-btn" (click)="returnToUniverse()">
            <ion-icon name="arrow-back" slot="start"></ion-icon> STAR MAP
          </ion-button>
          <div class="planet-badge" [style.color]="selectedPlanet?.color">
            {{ selectedPlanet?.name }} SECTOR
          </div>
        </div>

        <div class="planet-dashboard-header">
          <div class="planet-holo-display">
            <div class="holo-planet" [style.background]="selectedPlanet?.color" [style.box-shadow]="'0 0 100px ' + selectedPlanet?.color"></div>
          </div>
          <div class="planet-info-panel">
            <h1>{{ selectedPlanet?.name }}</h1>
            <p class="desc">{{ selectedPlanet?.description }}</p>
            <div class="stats-grid">
              <div class="stat"><label>POPULATION</label><span>{{ selectedPlanet?.population }}</span></div>
              <div class="stat"><label>TYPE</label><span>{{ selectedPlanet?.type }}</span></div>
            </div>
          </div>
        </div>

        <div class="regions-area">
          <div class="area-title"><h3>AVAILABLE MODULES</h3><div class="line"></div></div>
          
          <div class="moons-orbit-system">
            <div class="moon-unit" 
                 *ngFor="let region of skillRegions; let i = index"
                 (click)="enterRegion(region)"
                 [style.animation-delay.ms]="i * 150">
              
              <div class="moon-wrapper">
                <div class="moon-orbit-dashed" [style.border-color]="region.color"></div>
                
                <div class="moon-body" [style.background]="region.color">
                  <div class="moon-glow"></div>
                  <ion-icon [name]="region.icon"></ion-icon>
                </div>
              </div>
              
              <div class="moon-label">
                <h4>{{ region.title }}</h4>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </div>

  <footer class="cyber-footer">
    <div class="container">
      <div class="footer-row">
        <div class="col brand"><h5>XV Origin</h5><p>Â© {{ currentYear }} All Systems Nominal.</p></div>
        <div class="col links"><a href="#">Privacy</a><a href="#">Terms</a><a href="#">Contact</a></div>
      </div>
    </div>
  </footer>
</ion-content>